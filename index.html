<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Благодійна ініціатива з закупівлі книг</title>
  <meta name="description" content="Ініціатива «єКнига»: спрямовуємо державні 908 грн на книжки для дітей із дитячих будинків" />
  <meta name="theme-color" content="#7423F0" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-gradient: linear-gradient(135deg, #5B2EFF 0%, #7423F0 100%);
      --bg-blur: 32px;
      --accent: #FFF380;
      --accent-light: #CCF2FF;
      --radius: 16px;
      --shadow: 0 12px 36px -4px rgba(0,0,0,0.35);
      --transition: .35s cubic-bezier(.4,.2,.2,1);
      --text: #FFFFFF;
      --glass-bg: rgba(255,255,255,0.08);
      --glass-bg-hover: rgba(255,255,255,0.14);
      --glass-border: rgba(255,255,255,0.16);
      --focus: #FFF380;
      --step-radius: 20px;
      --safe-bottom: env(safe-area-inset-bottom);
      --mini-nav-h: 54px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }

    /* --- Фікс горизонтального скролу на мобільних --- */
    html, body { overflow-x: hidden; }
    @supports (overflow: clip) {
      html, body { overflow-x: clip; } /* сучасні браузери */
    }
    /* Підстраховка для вбудованих медіа/віджетів */
    img, video, iframe { max-width: 100%; height: auto; }

    html { scroll-behavior: smooth; }
    body {
      margin: 0;
      font-family: 'Montserrat', system-ui,-apple-system,sans-serif;
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      line-height: 1.5;
      min-height: 100vh;
      background: #5B2EFF;
      isolation: isolate;
      padding-bottom: calc(var(--mini-nav-h) + max(8px, var(--safe-bottom)));
    }

    body::before{
      content:"";
      position: fixed;
      inset: -60px;
      z-index: -1;
      pointer-events: none;
      background: var(--bg-gradient);
      filter: blur(var(--bg-blur));
      will-change: filter, transform;
      transform: translateZ(0);
    }

    @supports not ((filter: blur(1px))) {
      body::before{ inset: 0; filter: none; }
    }

    a { color: inherit; text-decoration: none; word-break: break-word; }

    /* ===== HERO (перероблений перший блок) ===== */
    .hero {
      position: relative;
      padding: clamp(32px, 7vw, 64px) 16px clamp(22px, 5vw, 40px);
      text-align: center;
    }
    .hero-inner {
      max-width: 900px;
      margin: 0 auto;
      background: color-mix(in oklab, white 6%, transparent);
      border: 1px solid var(--glass-border);
      border-radius: 28px;
      padding: clamp(24px, 7vw, 44px) clamp(20px, 6vw, 48px);
      backdrop-filter: saturate(130%) blur(10px);
      box-shadow: var(--shadow);
    }
    .hero-eyebrow {
      display: inline-flex;
      gap: 8px;
      align-items: center;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--glass-border);
      background: var(--glass-bg);
      font-size: .84rem;
      font-weight: 800;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: rgba(255,255,255,.92);
    }
    .hero h1 {
      margin: 12px 0 10px;
      font-size: clamp(1.7rem, 5.2vw, 2.8rem);
      font-weight: 800;
      letter-spacing: .6px;
      line-height: 1.15;
      background: linear-gradient(92deg, #FFFFFF, var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-wrap: balance;
    }
    .hero-subtitle {
      margin: 6px auto 0;
      max-width: 48ch;
      font-size: clamp(1rem, 3vw, 1.16rem);
      color: rgba(255,255,255,.94);
      text-wrap: balance;
    }
    .hero-meta {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      gap: 12px 16px;
      margin-top: 18px;
    }
    .hero-note { font-size: .9rem; color: rgba(255,255,255,.9); }

    .hero-cta {
      margin-top: 14px;
      display: flex; justify-content: center;
    }
    .hero-cta .btn {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 12px 18px;
      border-radius: 999px;
      border: 1px solid var(--glass-border);
      background: #FFFFFF;
      color: #7423F0;
      font-weight: 800;
      box-shadow: 0 12px 32px -4px rgba(0,0,0,.3);
      transition: transform var(--transition), box-shadow var(--transition), filter .3s;
    }
    .hero-cta .btn:hover { transform: translateY(-2px); }
    .hero-cta .btn:focus-visible { outline: 3px solid var(--focus); outline-offset: 3px; }

    /* Декоровані ореоли */
    .hero::after, .hero::before {
      content: "";
      position: absolute;
      inset: auto;
      width: 420px; height: 420px;
      filter: blur(60px);
      z-index: -1;
      opacity: .35;
      pointer-events: none;
      border-radius: 50%;
    }
    .hero::before { background: radial-gradient(circle at 30% 30%, var(--accent-light), transparent 60%); left: -120px; top: -80px; }
    .hero::after { background: radial-gradient(circle at 70% 70%, var(--accent), transparent 60%); right: -120px; bottom: -80px; }

    /* ===== MINI NAV (компактна навігація) ===== */
    .mini-nav {
      position: fixed;
      left: 50%; transform: translateX(-50%);
      bottom: max(10px, var(--safe-bottom));
      z-index: 50;
      background: rgba(255,255,255,0.10);
      border: 1px solid var(--glass-border);
      border-radius: 999px;
      padding: 6px;
      backdrop-filter: saturate(140%) blur(10px);
      box-shadow: var(--shadow);
      height: var(--mini-nav-h);
      /* === ИСПРАВЛЕНО: фон под размер трёх кнопок и идеальный центр === */
      display: inline-flex;               /* сжимается по контенту */
      align-items: center;
      width: auto;                        /* убран фиксированный/относительный размер */
      max-width: none;
      white-space: nowrap;                /* чтобы кнопки не переносились */
    }
    .mini-nav ul {
      /* было: grid с 3 колонками, из-за чего фон мог быть шире/неровно центрован */
      list-style: none;
      display: flex;                      /* равномерный зазор и ширина = сумме кнопок */
      gap: 6px;
      padding: 0;
      margin: 0;
      align-items: center;
      justify-content: center;
    }
    .mini-nav a {
      position: relative;
      display: inline-flex; align-items: center; justify-content: center;
      height: 40px; padding: 0 14px;
      border-radius: 12px;
      border: 1px solid var(--glass-border);
      background: rgba(255,255,255,0.06);
      font-weight: 800; font-size: .95rem;
      color: rgba(255,255,255,.95);
      letter-spacing: .2px;
      outline: none;
      transition: transform .18s ease, background .2s ease, border-color .2s ease;
      white-space: nowrap;
    }
    .mini-nav a:hover { transform: translateY(-1px); }
    .mini-nav a:focus-visible { box-shadow: 0 0 0 3px var(--focus); }
    .mini-nav .active { background: rgba(255,255,255,0.18); border-color: rgba(255,255,255,0.35); }

    /* Desktop: робимо навігацію липкою зверху та трохи меншою */
    @media (min-width: 980px) {
      body { padding-bottom: 0; }
      .mini-nav { top: 12px; bottom: auto; width: auto; left: 50%; transform: translateX(-50%); height: 48px; }
      .mini-nav a { height: 36px; }
    }

    /* ===== ORIGINAL STYLES (скориговані відступи) ===== */
    .container { max-width: 1100px; margin: 0 auto; padding: 0 14px 68px; }

    .dashboard-title { font-size: 1.95rem; font-weight: 800; text-transform: uppercase; letter-spacing: 1.5px; text-align: center; color: var(--accent); margin: 6px 0 8px; text-shadow: 1px 1px 4px rgba(0,0,0,0.3); }
    .dashboard-kicker{ text-align:center; font-size:.74rem; color:rgba(255,255,255,.85); letter-spacing:.12em; text-transform:uppercase; margin-bottom:16px; }

    .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }
    .card { background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: var(--radius); padding: 20px 18px; position: relative; overflow: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; gap: 10px; min-height: 150px; transition: transform var(--transition), background var(--transition), box-shadow var(--transition); box-shadow: var(--shadow); }
    .card:hover { transform: translateY(-4px); background: var(--glass-bg-hover); }
    .card h3 { font-size: 1.18rem; font-weight: 700; margin: 0; color: var(--accent); letter-spacing: 0.5px; text-transform: uppercase; line-height: 1.2; }
    .card .value { font-size: clamp(2rem, 4vw, 2.6rem); font-weight: 800; color: var(--accent-light); line-height: 1.1; display: block; }
    .stat-footnote { font-size: 0.78rem; color: rgba(255,255,255,0.82); }
    .card--participants h3 { font-size: 1.32rem; }
    .card--inline { align-items: stretch; }
    .card--inline .card-top { display: flex; align-items: baseline; justify-content: space-between; gap: 12px; width: 100%; text-align: left; }
    .card--inline h3 { margin: 0; }
    .card--inline .value { line-height: 1; white-space: nowrap; }

    .goal-section { margin-top: 8px; display: flex; flex-wrap: wrap; gap: 16px; }
    .goal-card { flex: 1 1 100%; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: var(--radius); padding: 22px 18px; position: relative; display: flex; flex-direction: column; gap: 14px; box-shadow: var(--shadow); }
    .goal-header { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: baseline; gap: 8px; }
    .goal-header h3 { margin: 0; font-size: 1.12rem; font-weight: 800; text-transform: uppercase; color: var(--accent); flex: 1; letter-spacing: .5px; }
    .goal-amounts { display: flex; gap: 14px; flex-wrap: wrap; align-items: center; justify-content: center; }
    .large-number { font-size: clamp(2rem, 5.6vw, 2.6rem); font-weight: 800; color: #FFFFFF; background: rgba(255,255,255,0.08); padding: 12px 18px; border-radius: 12px; min-width: 160px; text-align: center; position: relative; border: 1px solid var(--glass-border); }
    .progress-container { margin-top: 2px; }
    .progress-bar-wrapper { position: relative; height: 22px; border-radius: 999px; background: rgba(255,255,255,0.08); overflow: hidden; border: 1px solid var(--glass-border); }
    .progress-fill { height: 100%; width: 0; background: linear-gradient(90deg, #CCF2FF 0%, #FFF380 100%); border-radius: 999px; display: flex; align-items: center; justify-content: flex-end; padding-right: 8px; font-size: 0.78rem; font-weight: 800; color: #1A1A1A; will-change: width; transition: width .6s ease; }
    .goal-meta { display: flex; justify-content: space-between; font-size: 0.9rem; margin-top: 6px; flex-wrap: wrap; gap: 6px; color: #fff; }
    .overgoaled { background: rgba(160,255,184,0.15); border-radius: 8px; padding: 8px 12px; font-size: 0.9rem; font-weight: 700; color: #A0FFB8; display: inline-block; margin-top: 6px; align-self: start; border: 1px solid rgba(160,255,184,0.35); }
    .last-updated { font-size: 0.7rem; color: rgba(255,255,255,0.72); }

    .info-block { background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: var(--radius); padding: 24px 18px; margin: 28px 0; position: relative; display: flex; flex-direction: column; gap: 18px; box-shadow: var(--shadow); }
    .info-block h2 { font-size: clamp(1.4rem, 2.2vw, 1.7rem); font-weight: 800; margin: 0; color: var(--accent); text-transform: uppercase; letter-spacing: 1px; text-shadow: 1px 1px 2px rgba(0,0,0,0.25); }
    .info-block p, .info-block li { font-size: 1rem; color: #fff; }
    .info-block strong { color: #FFEB99; font-weight: 800; }
    .info-block ul { list-style: disc inside; margin: 6px 0 0; }

    .steps { display: grid; gap: 14px; }
    .steps-header { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
    .steps-title { margin: 0; font-size: clamp(1.2rem, 2vw, 1.4rem); font-weight: 800; color: var(--accent); text-transform: uppercase; letter-spacing: .6px; }
    .steps-button { font-size: 0.9rem; color: rgba(20,20,20,0.95); background: linear-gradient(135deg, #CCF2FF, #FFF380); padding: 10px 14px; border-radius: 10px; border: 1px solid var(--glass-border); display: inline-flex; align-items: center; gap: 8px; cursor: pointer; font-weight: 800; box-shadow: none; }
    .steps-button:focus-visible { outline: 3px solid var(--focus); outline-offset: 2px; }

    .steps-track { display: grid; grid-auto-flow: column; grid-auto-columns: minmax(340px, 1fr); gap: 16px; overflow-x: auto; overflow-y: hidden; overscroll-behavior-inline: contain; scroll-snap-type: x mandatory; padding: 6px 2px 10px; scrollbar-width: thin; -webkit-overflow-scrolling: touch; max-height: none; }
    .steps-track::-webkit-scrollbar { height: 8px; }
    .steps-track::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.25); border-radius: 999px; }

    .step { scroll-snap-align: start; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: var(--step-radius); padding: 24px; display: grid; grid-template-columns: auto 1fr; grid-template-areas: "badge title" "badge text"; column-gap: 16px; row-gap: 10px; min-height: 260px; max-height: none; box-shadow: none; backdrop-filter: saturate(120%) blur(8px); }
    .step-badge { grid-area: badge; width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, #CCF2FF, #FFF380); color: #1A1A1A; display: grid; place-items: center; font-weight: 900; font-size: 1.15rem; }
    .step-title { grid-area: title; margin: 0; font-weight: 800; font-size: 1.16rem; color: var(--accent-light); letter-spacing: .3px; align-self: center; }
    .step-text { grid-area: text; margin: 0; font-size: 1.06rem; color: #fff; display: block; overflow: visible; }

    .video-wrapper { position: relative; width: 100%; padding-top: 56.25%; border-radius: 12px; overflow: hidden; box-shadow: 0 12px 36px rgba(0,0,0,0.35); background: #1f1f35; border: 1px solid var(--glass-border); }
    .video-wrapper iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: none; }

    .report { margin-top: 40px; display: flex; flex-direction: column; gap: 14px; }
    .report .dashboard-title { margin-bottom: 8px; }
    .report-frame { position: relative; width: 100%; max-width: 580px; border-radius: 14px; overflow: hidden; box-shadow: var(--shadow); background: var(--glass-bg); margin-inline: auto; border: 1px solid var(--glass-border); }
    .report-frame iframe { width: 100%; height: 100%; aspect-ratio: 500/825; border: none; }
    .report-fallback { font-size: 0.9rem; background: rgba(255,255,255,0.06); padding: 12px 16px; border-radius: 10px; display: inline-block; margin-top: 6px; border: 1px solid var(--glass-border); }

    .contact { text-align: center; margin: 30px 0 10px; padding: 0 10px; }
    .contact p { margin-bottom: 12px; font-size: 1rem; line-height: 1.4; }
    .contact-button { display: inline-block; padding: 14px 30px; background: #FFFFFF; color: #7423F0; font-weight: 800; border-radius: 50px; text-decoration: none; box-shadow: 0 12px 32px -4px rgba(0,0,0,0.3); transition: transform var(--transition), filter .3s, box-shadow var(--transition); position: relative; }
    .contact-button:hover { transform: translateY(-2px); filter: brightness(1.05); }
    .contact-button:focus-visible { outline: 3px solid var(--focus); outline-offset: 3px; }

    /* ===== FAQ (стилі) ===== */
    .faq-section h2 {
      text-align: center;
      color: var(--accent);
      margin-top: 0;
    }
    .faq-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .faq-item {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 14px;
      transition: max-height 0.3s ease-in-out;
    }
    .faq-item[open] summary {
      color: var(--accent);
    }
    .faq-item summary {
      font-weight: 800;
      cursor: pointer;
      list-style-position: inside;
      outline: none;
    }
    .faq-item summary:focus-visible {
      outline: 3px solid var(--focus);
      border-radius: 8px;
      outline-offset: 3px;
    }
    .faq-item p {
      margin: 12px 0 0 0;
      padding-left: 10px;
      border-left: 2px solid var(--accent);
      font-size: 0.95rem;
      color: rgba(255, 255, 255, 0.9);
      line-height: 1.6;
    }
    .faq-item.closing {
      animation: closing-animation 0.3s ease-out;
    }
    @keyframes closing-animation {
      from { opacity: 1; max-height: 300px; }
      to   { opacity: 0; max-height: 48px; }
    }
    summary::marker { content: '＋ '; color: var(--accent); font-size: 1.2em; }
    details[open] summary::marker { content: '− '; }

    /* Мобільні */
    @media (max-width: 980px) {
      .stats { grid-template-columns: repeat(2, 1fr); }
      .card { min-height: 160px; }
      .report { align-items: center; }
    }
    @media (max-width: 520px) {
      .hero-inner { padding: 22px 18px; }
      .stats { grid-template-columns: repeat(2, 1fr); }
      .card { min-height: 170px; padding: 22px 16px; }
      .card h3 { font-size: 1.22rem; }
      .card--participants h3 { font-size: 1.38rem; }
      .card--inline .card-top { flex-direction: column; align-items: center; gap: 6px; }
      .stat-footnote { font-size: 0.82rem; }
      .goal-amounts { flex-direction: column; align-items: stretch; }
      .large-number { width: 100%; }
      .steps-track { grid-auto-columns: minmax(300px, 1fr); max-height: none; }
      .step { min-height: 280px; padding: 22px; }
      .step-text { font-size: 1.04rem; }
      .step-badge { width: 56px; height: 56px; }
    }

    /* Поважаємо користувачів з Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
      html { scroll-behavior: auto; }
      .card, .contact-button, .hero-cta .btn { transition: none; }
    }
  </style>
</head>
<body>
  <!-- HERO: перший блок -->
  <header class="hero" id="top">
    <div class="hero-inner">
      <div class="hero-eyebrow" aria-hidden="true">Благодійна ініціатива</div>
      <h1>Подаруйте книги дітям за «єКнига»</h1>
      <p class="hero-subtitle">Це <strong>не ваші особисті кошти</strong> — держава надає 908 грн. Ми допомагаємо прозоро спрямувати їх на книжки для дитячих будинків.</p>
    </div>
  </header>

  <!-- MINI NAV: компактна сучасна навігація -->
  <nav class="mini-nav" aria-label="Швидка навігація сайтом">
    <ul role="tablist" aria-label="Навігація сторінкою">
      <li><a href="#stats" data-nav role="tab" aria-controls="stats" aria-selected="true" class="active">Статистика</a></li>
      <li><a href="#guide" data-nav role="tab" aria-controls="guide" aria-selected="false">Інструкція</a></li>
      <li><a href="#faq" data-nav role="tab" aria-controls="faq" aria-selected="false">FAQ</a></li>
    </ul>
  </nav>

  <div class="container">
    <!-- Статистика -->
    <section id="stats">
      <div class="dashboard-title">Статистика ініціативи</div>
      <div class="dashboard-kicker" aria-hidden="true">DASHBOARD</div>

      <div class="stats" aria-label="Ключова статистика ініціативи">
        <!-- Змінено тільки відображення блоку "Зібрано (₴)" -->
        <div class="card" aria-label="Зібрано гривень">
          <h3>Зібрано (₴)</h3>
          <div class="value" id="totalAmount">0</div>
          <div class="stat-footnote">Завдяки благодійникам</div>
        </div>

        <div class="card card--participants" aria-label="Кількість благодійників">
          <h3>Учасників</h3>
          <div class="value" id="donorsCount">0</div>
          <div class="stat-footnote">Людей, які долучилися</div>
        </div>

        <div class="card" aria-label="Дитячі будинки">
          <h3>Дитячих будинків</h3>
          <div class="value" id="orphanagesCount">0</div>
          <div class="stat-footnote">Заклади, які підтримали</div>
        </div>

        <div class="card" aria-label="Одиниці книг / матеріалів">
          <h3>Одиниць книг/матеріалів</h3>
          <div class="value" id="itemsCount">0</div>
          <div class="stat-footnote">Передано</div>
        </div>
      </div>

      <!-- До цілі -->
      <div class="goal-section">
        <div class="goal-card" aria-label="Прогрес до цілі збору коштів">
          <div class="goal-header">
            <h3>До цілі (₴)</h3>
            <div class="last-updated" id="goalUpdated"> </div>
          </div>
          <div class="goal-amounts">
            <div class="large-number" aria-label="Залишилось до цілі" id="remaining">0</div>
            <div style="flex:1; min-width:220px;">
              <div class="progress-container">
                <div class="progress-bar-wrapper" aria-hidden="true">
                  <div class="progress-fill" id="progressFill">0%</div>
                </div>
                <div class="goal-meta" aria-live="polite">
                  <div id="percentText">0% зібрано</div>
                  <div id="toGoalText">Залишилось 0 ₴</div>
                </div>
              </div>
            </div>
          </div>
          <div id="overFlowText" aria-live="polite"></div>
        </div>
      </div>
    </section>

    <!-- Контакт -->
    <div class="contact">
      <p>Маєш право на <strong>єКнига (908 грн)</strong> і хочеш передати кошти на книжки для дитячих будинків? Долучайся — без жодних власних витрат.</p>
      <a href="https://t.me/iamhlixli" target="_blank" rel="noopener" class="contact-button" aria-label="Зв'язатися в Telegram">Зв'язатися в Telegram</a>
    </div>

    <!-- Інформація + Інструкція -->
    <section id="guide" class="info-block" aria-label="Інформація про ініціативу та інструкцію">
      <h2>Про ініціативу</h2>
      <p>Ми об’єднуємо благодійників для дітей з дитячих будинків (ДБ) та дитячих будинків сімейного типу (ДБСТ). Якщо тобі <strong>виповнилося 18</strong> і ти маєш право на <strong>«єКнига»</strong>, ти можеш направити <strong>908 грн</strong> на книжки для дітей — швидко та прозоро.</p>

      <div>
        <p><strong>Як це працює?</strong></p>
        <ul>
          <li>Держава надає 908 грн у межах програми «єКнига» — витратити можна лише на книги.</li>
          <li>Після нарахування коштів ти оплачуєш підготовлене замовлення на книжки для конкретного закладу.</li>
          <li>Ми публічно звітуємо про кожну передачу книжок.</li>
        </ul>
      </div>

      <div class="steps" aria-label="Покрокова інструкція">
        <div class="steps-header">
          <h3 class="steps-title">Покрокова інструкція</h3>
          <button id="scrollNext" type="button" class="steps-button" aria-label="Прокрутити на одну картку праворуч">
            Гортай →
          </button>
        </div>

        <div class="steps-track" id="stepsTrack" tabindex="0" role="group" aria-label="Кроки оформлення в застосунку Дія">
          <article class="step" aria-label="Крок 1">
            <div class="step-badge" aria-hidden="true">1</div>
            <h4 class="step-title">Відкрий застосунок Дія</h4>
            <p class="step-text">Перейди в розділ <strong>«Сервіси»</strong> на головному екрані.</p>
          </article>

          <article class="step" aria-label="Крок 2">
            <div class="step-badge" aria-hidden="true">2</div>
            <h4 class="step-title">Обери послугу «єКнига»</h4>
            <p class="step-text">Знайди картку <strong>«єКнига»</strong> у списку сервісів і відкрий її.</p>
          </article>

          <article class="step" aria-label="Крок 3">
            <div class="step-badge" aria-hidden="true">3</div>
            <h4 class="step-title">Ознайомся з умовами</h4>
            <p class="step-text">Натисни <strong>«Розпочати»</strong> та пройди короткі підказки.</p>
          </article>

          <article class="step" aria-label="Крок 4">
            <div class="step-badge" aria-hidden="true">4</div>
            <h4 class="step-title">Вибери картку для виплати</h4>
            <p class="step-text">Створи або обери картку, на яку зарахують кошти <strong>єКнига</strong>.</p>
          </article>

          <article class="step" aria-label="Крок 5">
            <div class="step-badge" aria-hidden="true">5</div>
            <h4 class="step-title">Підтверди заяву</h4>
            <p class="step-text">Перевір дані та натисни <strong>«Надіслати»</strong>. Кошти надходять протягом <strong>до 3 днів</strong>.</p>
          </article>

          <article class="step" aria-label="Крок 6">
            <div class="step-badge" aria-hidden="true">6</div>
            <h4 class="step-title">Оплата книжок</h4>
            <p class="step-text">Як тільки кошти надійдуть — я надішлю посилання для оплати підготовленого замовлення.</p>
          </article>
        </div>
      </div>

      <div>
        <p><strong>Відеоінструкція</strong> — усе просто та швидко:</p>
        <div class="video-wrapper" aria-label="Відео інструкція оформлення картки">
          <iframe width="560" height="315" src="https://www.youtube.com/embed/5qc9-pEs_t4?si=xKck3W6izyjK8Py" title="Відеоінструкція: як оформити картку єКнига" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen loading="lazy"></iframe>
        </div>
      </div>

      <p>Після подачі заявки карта з’являється миттєво, а кошти надходять протягом <strong>до 3 днів</strong>. <br><strong>Як тільки кошти надійдуть — я надішлю посилання для оплати книжок.</strong></p>
    </section>

    <!-- FAQ -->
    <section id="faq" class="info-block faq-section" aria-labelledby="faq-title">
      <h2 id="faq-title">Часті питання (FAQ)</h2>
      <div class="faq-list">
        <details class="faq-item">
          <summary>Чи справді це не мої гроші?</summary>
          <p>Так, це кошти, які надає держава в рамках програми «єКнига». Ви не витрачаєте ні гривні з власної кишені. Ваша роль — направити ці кошти на благодійність.</p>
        </details>
        <details class="faq-item">
          <summary>Як я можу бути впевненим, що книги дійдуть до дітей?</summary>
          <p>Ми надаємо повну звітність: фото чеків, перелік книжок і фотозвіти з дитячих будинків (за погодженням із адміністрацією). Усе максимально прозоро.</p>
        </details>
        <details class="faq-item">
          <summary>Що робити, якщо мені не нараховують кошти?</summary>
          <p>Зазвичай кошти надходять протягом 3 робочих днів. Якщо виникла затримка, зверніться до підтримки вашого банку або сервісу Дія.</p>
        </details>
      </div>
    </section>

    <!-- Звітування -->
    <section id="reports" class="report">
      <div class="dashboard-title">Звітування</div>
      <div class="report-frame">
        <iframe
          src="https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2Fpermalink.php%3Fstory_fbid%3Dpfbid02NhboPBHCDS94mEUDzyBYGcNUEUiK1iMkzaNoaboaFauw82SU5KEyhZ8ia1SDjQJ1l%26id%3D100091519694547&show_text=true"
          loading="lazy"
          title="Facebook звіт">
        </iframe>
      </div>
      <div class="report-fallback">Якщо допис не завантажився — відкрий його у Facebook або онови сторінку.</div>
    </section>
  </div>

  <script>
    const data = {
      totalAmount: 23387,
      donorsCount: 19,
      orphanagesCount: 4,
      itemsCount: 77,
      targetAmount: 50000
    };

    const formatter = new Intl.NumberFormat('uk-UA');

    function animateCount(id, endValue, duration) {
      const el = document.getElementById(id);
      if (!el) return;
      const start = performance.now();
      const step = now => {
        const t = Math.min((now - start) / duration, 1);
        const eased = t < 0.5 ? 2*t*t : -1 + (4 - 2*t)*t;
        el.textContent = formatter.format(Math.floor(eased * endValue));
        if (t < 1) requestAnimationFrame(step);
      };
      requestAnimationFrame(step);
    }

    function animateProgress(percent, duration) {
      const fill = document.getElementById('progressFill');
      const percentText = document.getElementById('percentText');
      const toGoalText = document.getElementById('toGoalText');
      const remainingEl = document.getElementById('remaining');
      const overFlowText = document.getElementById('overFlowText');
      const goalUpdated = document.getElementById('goalUpdated');

      const start = performance.now();
      const tick = now => {
        const t = Math.min((now - start) / duration, 1);
        const currentPercent = Math.floor(t * percent);
        if (fill) { fill.style.width = currentPercent + '%'; fill.textContent = `${currentPercent}%`; }
        if (percentText) percentText.textContent = `${currentPercent}% зібрано`;
        if (t < 1) requestAnimationFrame(tick);
      };
      requestAnimationFrame(tick);

      const remaining = Math.max(0, data.targetAmount - data.totalAmount);
      const over = data.totalAmount - data.targetAmount;
      if (data.totalAmount >= data.targetAmount) {
        toGoalText.textContent = `Ціль перевиконано`;
        overFlowText.className = 'overgoaled';
        overFlowText.textContent = `Перевиконано на ${formatter.format(over)} ₴`;
        remainingEl.textContent = formatter.format(0);
      } else {
        toGoalText.textContent = `Залишилось ${formatter.format(remaining)} ₴`;
        remainingEl.textContent = formatter.format(remaining);
      }

      if (goalUpdated) {
        const d = new Date();
        const opts = { day: 'numeric', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit' };
        goalUpdated.textContent = `Оновлено: ${d.toLocaleString('uk-UA', opts)}`;
      }
    }

    function setUpdatedTimestamp() {
      const el = document.getElementById('updatedAt');
      if (!el) return;
      const d = new Date();
      const opts = { day: 'numeric', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit' };
      el.textContent = `Оновлено: ${d.toLocaleString('uk-UA', opts)}`;
    }

    /* Клавіатурна навігація ← → */
    function initStepsKeyboardNav() {
      const track = document.getElementById('stepsTrack');
      if (!track) return;
      track.addEventListener('keydown', (e) => {
        const firstCard = track.querySelector('.step');
        if (!firstCard) return;
        const gap = parseFloat(getComputedStyle(track).columnGap || getComputedStyle(track).gap || 16);
        const stepWidth = firstCard.getBoundingClientRect().width + gap;

        if (e.key === 'ArrowRight') {
          e.preventDefault();
          track.scrollBy({ left: stepWidth, behavior: 'smooth' });
        } else if (e.key === 'ArrowLeft') {
          e.preventDefault();
          track.scrollBy({ left: -stepWidth, behavior: 'smooth' });
        }
      });
    }

    /* Вертикальну прокрутку колесом миші переводимо в горизонтальну */
    function lockVerticalScrollInSteps(){
      const track = document.getElementById('stepsTrack');
      if (!track) return;
      track.addEventListener('wheel', e => {
        if (Math.abs(e.deltaX) > Math.abs(e.deltaY)) return;
        track.scrollBy({ left: e.deltaY, behavior: 'auto' });
        e.preventDefault();
      }, { passive: false });
    }

    /* Кнопка "Гортай →" — прокручує рівно на 1 картку, з поверненням на початок в кінці */
    function initStepsButton() {
      const btn = document.getElementById('scrollNext');
      const track = document.getElementById('stepsTrack');
      if (!btn || !track) return;

      btn.addEventListener('click', () => {
        const firstCard = track.querySelector('.step');
        if (!firstCard) return;

        const styles = getComputedStyle(track);
        const gap = parseFloat(styles.columnGap || styles.gap || 16);
        const stepWidth = firstCard.getBoundingClientRect().width + gap;

        const nearEnd = track.scrollLeft + track.clientWidth >= track.scrollWidth - 2;
        if (nearEnd) {
          track.scrollTo({ left: 0, behavior: 'smooth' });
        } else {
          track.scrollBy({ left: stepWidth, behavior: 'smooth' });
        }
      });
    }

    /* ===== MINI NAV JS: активний пункт ===== */
    function initMiniNav() {
      const links = [...document.querySelectorAll('.mini-nav a[data-nav]')];
      if (!links.length) return;

      function setActive(id) {
        links.forEach(a => {
          const match = a.getAttribute('href') === `#${id}`;
          a.classList.toggle('active', match);
          a.setAttribute('aria-selected', match ? 'true' : 'false');
        });
      }

      // Клік — плавний скрол до секції
      links.forEach(a => {
        a.addEventListener('click', (e) => {
          e.preventDefault();
          const id = a.getAttribute('href').slice(1);
          const target = document.getElementById(id);
          if (!target) return;
          const y = target.getBoundingClientRect().top + window.scrollY - (window.innerWidth >= 980 ? 84 : 10);
          window.scrollTo({ top: y, behavior: 'smooth' });
          setActive(id);
        });
      });

      // Виділення активного пункту за видимістю секції
      const sections = links.map(a => document.querySelector(a.getAttribute('href'))).filter(Boolean);
      const io = new IntersectionObserver((entries) => {
        entries.forEach(en => { if (en.isIntersecting) setActive(en.target.id); });
      }, { rootMargin: '-45% 0px -45% 0px', threshold: [0, .2, .5, .8, 1] });
      sections.forEach(sec => io.observe(sec));
    }

    /* ===== FAQ: плавне закриття ===== */
    function initFaqAnimation() {
      const faqItems = document.querySelectorAll('.faq-item');
      faqItems.forEach(item => {
        const summary = item.querySelector('summary');
        if (!summary) return;
        summary.addEventListener('click', (e) => {
          if (item.hasAttribute('open')) {
            e.preventDefault();
            item.classList.add('closing');
            item.addEventListener('animationend', () => {
              item.removeAttribute('open');
              item.classList.remove('closing');
            }, { once: true });
          }
        });
      });
    }

    window.addEventListener('DOMContentLoaded', () => {
      // Лічильники/прогрес
      animateCount('totalAmount', data.totalAmount, 900);
      animateCount('donorsCount', data.donorsCount, 700);
      animateCount('orphanagesCount', data.orphanagesCount, 700);
      animateCount('itemsCount', data.itemsCount, 700);
      animateProgress(Math.min(100, Math.round((data.totalAmount / data.targetAmount) * 100)), 900);

      // Пролистування кроків
      initStepsKeyboardNav();
      lockVerticalScrollInSteps();
      initStepsButton();

      // Навігація
      initMiniNav();

      // FAQ
      initFaqAnimation();
    });
  </script>
</body>
</html>
